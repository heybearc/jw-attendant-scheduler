"use strict";(()=>{var e={};e.id=8873,e.ids=[8873],e.modules={3524:e=>{e.exports=require("@prisma/client")},2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},327:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>x,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>d});var o={};r.r(o),r.d(o,{POST:()=>u});var n=r(9303),s=r(8716),a=r(670),i=r(7070),l=r(8574);async function u(e){try{console.log("[LOGIN] Starting login process");let{email:t,password:r}=await e.json();if(console.log("[LOGIN] Received credentials for email:",t),!t||!r)return console.log("[LOGIN] Missing email or password"),i.NextResponse.json({error:"Email and password are required"},{status:400});console.log("[LOGIN] Validating credentials...");let o=await l.e.validateCredentials(t,r);if(!o)return console.log("[LOGIN] Invalid credentials for email:",t),i.NextResponse.json({error:"Invalid credentials"},{status:401});console.log("[LOGIN] User validated successfully, ID:",o.id);let n=l.e.generateToken(o);console.log("[LOGIN] JWT token generated, length:",n.length);let s=i.NextResponse.json({success:!0,user:{id:o.id,email:o.email,name:`${o.firstName} ${o.lastName}`,role:o.role}}),a=`auth-token=${n}; Path=/; Max-Age=604800; HttpOnly; SameSite=lax`;return console.log("[LOGIN] Setting cookie with value length:",n.length),console.log("[LOGIN] Cookie string:",a),s.headers.set("Set-Cookie",a),console.log("[LOGIN] Login successful for user:",o.email),s}catch(e){return console.error("[LOGIN] Login error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let c=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/auth/login/route",pathname:"/api/auth/login",filename:"route",bundlePath:"app/api/auth/login/route"},resolvedPagePath:"/Users/cory/Documents/Cloudy-Work/applications/jw-attendant-scheduler/app/api/auth/login/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:p,staticGenerationAsyncStorage:d,serverHooks:g}=c,m="/api/auth/login/route";function x(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:d})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[9276,5972,8574],()=>r(327));module.exports=o})();