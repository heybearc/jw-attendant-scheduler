(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{9907:function(e,t,s){Promise.resolve().then(s.bind(s,1720))},1720:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var n=s(7437),r=s(9294),l=s(9376),a=s(2265),o=s(7648);function i(){let{user:e,loading:t,logout:s}=(0,r.a)(),i=(0,l.useRouter)(),[d,c]=(0,a.useState)({totalEvents:0,upcomingEvents:0,totalAttendants:0,myAssignments:0}),[u,h]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if(!t){if(!e){i.push("/auth/signin");return}x()}},[e,t,i]);let x=async()=>{try{let e=await fetch("/api/dashboard/stats");if(e.ok){let t=await e.json();c(t)}}catch(e){console.error("Failed to fetch dashboard stats:",e)}finally{h(!1)}};return t||u?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)("div",{className:"text-lg",children:"Loading..."})}):(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,n.jsx)("div",{className:"container mx-auto px-4 max-w-6xl",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Dashboard"}),(0,n.jsxs)("p",{className:"text-gray-600",children:["Welcome back, ",null==e?void 0:e.name]})]}),(0,n.jsxs)("div",{className:"space-x-4",children:[(null==e?void 0:e.role)==="ADMIN"&&(0,n.jsx)(o.default,{href:"/admin",className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Admin Panel"}),(0,n.jsx)("button",{onClick:()=>s().then(()=>i.push("/auth/signin")),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Sign Out"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,n.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-blue-900",children:"Total Events"}),(0,n.jsx)("p",{className:"text-2xl font-bold text-blue-700",children:d.totalEvents})]}),(0,n.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-green-900",children:"Upcoming Events"}),(0,n.jsx)("p",{className:"text-2xl font-bold text-green-700",children:d.upcomingEvents})]}),(0,n.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-purple-900",children:"Total Attendants"}),(0,n.jsx)("p",{className:"text-2xl font-bold text-purple-700",children:d.totalAttendants})]}),(0,n.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-orange-900",children:"My Assignments"}),(0,n.jsx)("p",{className:"text-2xl font-bold text-orange-700",children:d.myAssignments})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,n.jsxs)(o.default,{href:"/events",className:"bg-blue-100 border border-blue-200 rounded-lg p-6 hover:bg-blue-200 transition-colors",children:[(0,n.jsx)("h3",{className:"text-xl font-semibold text-blue-900 mb-2",children:"Event Management"}),(0,n.jsx)("p",{className:"text-blue-700",children:"Create and manage events, positions, and schedules"})]}),(0,n.jsxs)(o.default,{href:"/attendants",className:"bg-green-100 border border-green-200 rounded-lg p-6 hover:bg-green-200 transition-colors",children:[(0,n.jsx)("h3",{className:"text-xl font-semibold text-green-900 mb-2",children:"Attendant Management"}),(0,n.jsx)("p",{className:"text-green-700",children:"Manage attendant profiles and assignments"})]}),(0,n.jsxs)(o.default,{href:"/counts",className:"bg-purple-100 border border-purple-200 rounded-lg p-6 hover:bg-purple-200 transition-colors",children:[(0,n.jsx)("h3",{className:"text-xl font-semibold text-purple-900 mb-2",children:"Count Tracking"}),(0,n.jsx)("p",{className:"text-purple-700",children:"Track attendance counts and generate reports"})]}),["ADMIN","OVERSEER"].includes((null==e?void 0:e.role)||"")&&(0,n.jsxs)(o.default,{href:"/oversight",className:"bg-red-100 border border-red-200 rounded-lg p-6 hover:bg-red-200 transition-colors",children:[(0,n.jsx)("h3",{className:"text-xl font-semibold text-red-900 mb-2",children:"Oversight"}),(0,n.jsx)("p",{className:"text-red-700",children:"Department oversight and management tools"})]}),(0,n.jsxs)(o.default,{href:"/assignments",className:"bg-yellow-100 border border-yellow-200 rounded-lg p-6 hover:bg-yellow-200 transition-colors",children:[(0,n.jsx)("h3",{className:"text-xl font-semibold text-yellow-900 mb-2",children:"My Assignments"}),(0,n.jsx)("p",{className:"text-yellow-700",children:"View your current and upcoming assignments"})]}),(0,n.jsxs)(o.default,{href:"/documents",className:"bg-indigo-100 border border-indigo-200 rounded-lg p-6 hover:bg-indigo-200 transition-colors",children:[(0,n.jsx)("h3",{className:"text-xl font-semibold text-indigo-900 mb-2",children:"Documents"}),(0,n.jsx)("p",{className:"text-indigo-700",children:"Access event documents and resources"})]})]})]})})})}},9294:function(e,t,s){"use strict";s.d(t,{Providers:function(){return o},a:function(){return a}});var n=s(7437),r=s(2265);let l=(0,r.createContext)(void 0);function a(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function o(e){let{children:t}=e,[s,a]=(0,r.useState)(null),[o,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{d()},[]);let d=async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let t=await e.json();a(t.user)}}catch(e){console.error("Auth check failed:",e)}finally{i(!1)}},c=async(e,t)=>{try{let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(s.ok){let e=await s.json();return a(e.user),!0}return!1}catch(e){return console.error("Login failed:",e),!1}},u=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),a(null)}catch(e){console.error("Logout failed:",e)}};return(0,n.jsx)(l.Provider,{value:{user:s,loading:o,login:c,logout:u},children:t})}},9376:function(e,t,s){"use strict";var n=s(5475);s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=9907)}),_N_E=e.O()}]);