(()=>{var e={};e.id=3708,e.ids=[3708],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3255:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o}),s(3319),s(4752),s(5866);var r=s(3191),a=s(8716),n=s(7922),l=s.n(n),i=s(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let o=["",{children:["admin",{children:["audit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3319)),"/Users/cory/Documents/Cloudy-Work/applications/jw-attendant-scheduler/app/admin/audit/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4752)),"/Users/cory/Documents/Cloudy-Work/applications/jw-attendant-scheduler/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/cory/Documents/Cloudy-Work/applications/jw-attendant-scheduler/app/admin/audit/page.tsx"],x="/admin/audit/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/audit/page",pathname:"/admin/audit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},5710:(e,t,s)=>{Promise.resolve().then(s.bind(s,4551))},1907:(e,t,s)=>{Promise.resolve().then(s.bind(s,8143))},3040:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},4551:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(326),a=s(8143),n=s(5047),l=s(7577),i=s(434);function d(){let{user:e,loading:t}=(0,a.a)();(0,n.useRouter)();let[s,d]=(0,l.useState)([]),[o,c]=(0,l.useState)(!0),[x,u]=(0,l.useState)({action:"",severity:"",dateFrom:"",dateTo:"",userId:"",search:""}),[m,h]=(0,l.useState)(1),[p,g]=(0,l.useState)(1);new Date(Date.now()-18e5).toISOString(),new Date(Date.now()-72e5).toISOString(),new Date(Date.now()-144e5).toISOString(),new Date(Date.now()-216e5).toISOString(),new Date(Date.now()-288e5).toISOString();let b=e=>{switch(e){case"CRITICAL":return"bg-red-100 text-red-800 border-red-200";case"HIGH":return"bg-orange-100 text-orange-800 border-orange-200";case"MEDIUM":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"LOW":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},y=e=>{switch(e){case"USER_CREATED":return"\uD83D\uDC64➕";case"USER_UPDATED":return"\uD83D\uDC64✏️";case"USER_DELETED":return"\uD83D\uDC64❌";case"BULK_USER_IMPORT":return"\uD83D\uDCE5\uD83D\uDC65";case"LOGIN_SUCCESS":return"\uD83D\uDD13✅";case"LOGIN_FAILED":return"\uD83D\uDD12❌";case"EMAIL_CONFIG_UPDATED":return"\uD83D\uDCE7⚙️";case"ROLE_CHANGED":return"\uD83D\uDD04\uD83D\uDC64";case"SYSTEM_SETTINGS_UPDATED":return"⚙️✏️";default:return"\uD83D\uDCDD"}},j=e=>{let t=new Date(e),s=new Date().getTime()-t.getTime(),r=Math.floor(s/6e4),a=Math.floor(s/36e5),n=Math.floor(s/864e5);return r<60?`${r} minutes ago`:a<24?`${a} hours ago`:n<7?`${n} days ago`:t.toLocaleDateString()};return t||o?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"text-lg",children:"Loading..."})}):r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsx("div",{className:"container mx-auto px-4 max-w-7xl",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Audit & Security Logs"}),r.jsx(i.default,{href:"/admin",className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Back to Admin"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[r.jsx("h3",{className:"text-sm font-semibold text-red-800",children:"Critical Events"}),r.jsx("p",{className:"text-2xl font-bold text-red-700",children:s.filter(e=>"CRITICAL"===e.severity).length}),r.jsx("p",{className:"text-xs text-red-600",children:"Last 24 hours"})]}),(0,r.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[r.jsx("h3",{className:"text-sm font-semibold text-orange-800",children:"Failed Logins"}),r.jsx("p",{className:"text-2xl font-bold text-orange-700",children:s.filter(e=>"LOGIN_FAILED"===e.action).length}),r.jsx("p",{className:"text-xs text-orange-600",children:"Last 24 hours"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[r.jsx("h3",{className:"text-sm font-semibold text-blue-800",children:"User Actions"}),r.jsx("p",{className:"text-2xl font-bold text-blue-700",children:s.filter(e=>e.action.includes("USER_")).length}),r.jsx("p",{className:"text-xs text-blue-600",children:"Last 24 hours"})]}),(0,r.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[r.jsx("h3",{className:"text-sm font-semibold text-green-800",children:"Total Events"}),r.jsx("p",{className:"text-2xl font-bold text-green-700",children:s.length}),r.jsx("p",{className:"text-xs text-green-600",children:"Last 24 hours"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Filters"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Action"}),(0,r.jsxs)("select",{className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",value:x.action,onChange:e=>u({...x,action:e.target.value}),children:[r.jsx("option",{value:"",children:"All Actions"}),r.jsx("option",{value:"USER_CREATED",children:"User Created"}),r.jsx("option",{value:"LOGIN_FAILED",children:"Login Failed"}),r.jsx("option",{value:"EMAIL_CONFIG_UPDATED",children:"Email Config"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Severity"}),(0,r.jsxs)("select",{className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",value:x.severity,onChange:e=>u({...x,severity:e.target.value}),children:[r.jsx("option",{value:"",children:"All Levels"}),r.jsx("option",{value:"CRITICAL",children:"Critical"}),r.jsx("option",{value:"HIGH",children:"High"}),r.jsx("option",{value:"MEDIUM",children:"Medium"}),r.jsx("option",{value:"LOW",children:"Low"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"From Date"}),r.jsx("input",{type:"date",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",value:x.dateFrom,onChange:e=>u({...x,dateFrom:e.target.value})})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"To Date"}),r.jsx("input",{type:"date",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",value:x.dateTo,onChange:e=>u({...x,dateTo:e.target.value})})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),r.jsx("input",{type:"text",placeholder:"User, IP, details...",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",value:x.search,onChange:e=>u({...x,search:e.target.value})})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{className:"w-full bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700",children:"Apply Filters"})})]})]}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full table-auto",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-50 border-b",children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IP Address"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Severity"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:[r.jsx("div",{children:j(e.timestamp)}),r.jsx("div",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]}),(0,r.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:[r.jsx("div",{className:"font-medium text-gray-900",children:e.userName}),r.jsx("div",{className:"text-xs text-gray-500",children:e.userEmail})]}),(0,r.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("span",{className:"mr-2",children:y(e.action)}),r.jsx("span",{className:"font-medium",children:e.action.replace(/_/g," ")})]}),r.jsx("div",{className:"text-xs text-gray-500",children:e.resource})]}),r.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 max-w-xs",children:r.jsx("div",{className:"truncate",title:e.details,children:e.details})}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 font-mono",children:e.ipAddress}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded border ${b(e.severity)}`,children:e.severity})})]},e.id))})]})}),(0,r.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",s.length," entries"]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{disabled:1===m,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50",children:"Previous"}),r.jsx("span",{className:"px-3 py-1 bg-blue-600 text-white rounded text-sm",children:m}),r.jsx("button",{disabled:m===p,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50",children:"Next"})]})]}),r.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Audit logs are retained for 90 days and automatically archived."}),(0,r.jsxs)("div",{className:"space-x-2",children:[r.jsx("button",{disabled:!0,className:"bg-gray-300 text-gray-500 px-4 py-2 rounded text-sm cursor-not-allowed",children:"Export CSV (Coming Soon)"}),r.jsx("button",{disabled:!0,className:"bg-gray-300 text-gray-500 px-4 py-2 rounded text-sm cursor-not-allowed",children:"Generate Report (Coming Soon)"})]})]})})]})})})}},8143:(e,t,s)=>{"use strict";s.d(t,{Providers:()=>i,a:()=>l});var r=s(326),a=s(7577);let n=(0,a.createContext)(void 0);function l(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function i({children:e}){let[t,s]=(0,a.useState)(null),[l,i]=(0,a.useState)(!0),d=async(e,t)=>{try{let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t})});if(r.ok){let e=await r.json();return s(e.user),!0}return!1}catch(e){return console.error("Login failed:",e),!1}},o=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),s(null)}catch(e){console.error("Logout failed:",e)}};return r.jsx(n.Provider,{value:{user:t,loading:l,login:d,logout:o},children:e})}},5047:(e,t,s)=>{"use strict";var r=s(7389);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},3319:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/cory/Documents/Cloudy-Work/applications/jw-attendant-scheduler/app/admin/audit/page.tsx#default`)},4752:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,metadata:()=>d});var r=s(9510),a=s(5384),n=s.n(a);s(1159),s(7272);var l=s(8570);(0,l.createProxy)(String.raw`/Users/cory/Documents/Cloudy-Work/applications/jw-attendant-scheduler/app/providers.tsx#useAuth`);let i=(0,l.createProxy)(String.raw`/Users/cory/Documents/Cloudy-Work/applications/jw-attendant-scheduler/app/providers.tsx#Providers`),d={title:"JW Attendant Scheduler",description:"Next.js SDD Implementation of JW Attendant Scheduler"};function o({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:n().className,children:r.jsx(i,{children:e})})})}},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[9276,2892,434],()=>s(3255));module.exports=r})();