(()=>{var e={};e.id=676,e.ids=[676],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8717:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c}),s(4683),s(1506),s(5866);var n=s(3191),a=s(8716),r=s(7922),o=s.n(r),l=s(5231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);s.d(t,i);let c=["",{children:["counts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4683)),"/Users/cory/Documents/Cloudy-Work/applications/jw-attendant-scheduler/app/counts/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"/Users/cory/Documents/Cloudy-Work/applications/jw-attendant-scheduler/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/cory/Documents/Cloudy-Work/applications/jw-attendant-scheduler/app/counts/page.tsx"],m="/counts/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/counts/page",pathname:"/counts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6848:(e,t,s)=>{Promise.resolve().then(s.bind(s,4852))},3040:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},5777:()=>{},4852:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var n=s(326),a=s(7577);function r(){let[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)(!0),[o,l]=(0,a.useState)(""),[i,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)([]),[x,h]=(0,a.useState)(null),[u,p]=(0,a.useState)({eventId:"",sessionName:"",countTime:"",notes:""}),v=async()=>{try{let e=await fetch("/api/counts"),s=await e.json();t(s)}catch(e){console.error("Failed to load count sessions:",e)}finally{r(!1)}},g=async()=>{try{let e=await fetch("/api/counts/analytics"),t=await e.json();h(t)}catch(e){console.error("Failed to load analytics:",e)}},b=async()=>{if(!o.trim()){v();return}try{let e=await fetch(`/api/counts/search?q=${encodeURIComponent(o)}`),s=await e.json();t(s)}catch(e){console.error("Search failed:",e)}},j=async e=>{e.preventDefault();try{let e=await fetch("/api/counts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,eventId:parseInt(u.eventId),countTime:new Date(u.countTime).toISOString()})});if(e.ok)p({eventId:"",sessionName:"",countTime:"",notes:""}),c(!1),v(),g();else{let t=await e.json();alert(t.error||"Failed to create count session")}}catch(e){console.error("Failed to create count session:",e),alert("Failed to create count session")}},N=async()=>{if(!u.eventId){alert("Please select an event first");return}try{let e=await fetch(`/api/counts/generate-name?eventId=${u.eventId}`),t=await e.json();p({...u,sessionName:t.sessionName})}catch(e){console.error("Failed to generate session name:",e)}},y=e=>new Date(e).toLocaleString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return s?n.jsx("div",{className:"container mx-auto p-8",children:(0,n.jsxs)("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/4 mb-6"}),n.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>n.jsx("div",{className:"h-24 bg-gray-200 rounded"},e))})]})}):(0,n.jsxs)("div",{className:"container mx-auto p-8",children:[n.jsx("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 p-4 mb-6",children:(0,n.jsxs)("p",{className:"text-yellow-700",children:[n.jsx("strong",{children:"Next.js Staging Environment"})," - Count tracking with SDD architecture"]})}),(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Count Tracking"}),n.jsx("button",{onClick:()=>c(!0),className:"bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700",children:"Add Count Session"})]}),x&&(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,n.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Sessions"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.totalSessions})]}),(0,n.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Active Sessions"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.activeSessions})]}),(0,n.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Avg per Event"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:x.averageSessionsPerEvent})]}),(0,n.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Most Active Event"}),n.jsx("p",{className:"text-sm font-bold text-purple-600",children:x.mostActiveEvent?x.mostActiveEvent.eventName:"None"}),x.mostActiveEvent&&(0,n.jsxs)("p",{className:"text-xs text-gray-500",children:[x.mostActiveEvent.sessionCount," sessions"]})]})]}),(0,n.jsxs)("div",{className:"mb-6 flex gap-4",children:[n.jsx("input",{type:"text",placeholder:"Search count sessions...",value:o,onChange:e=>l(e.target.value),className:"flex-1 px-4 py-2 border rounded-lg",onKeyPress:e=>"Enter"===e.key&&b()}),n.jsx("button",{onClick:b,className:"bg-gray-600 text-white px-6 py-2 rounded hover:bg-gray-700",children:"Search"}),n.jsx("button",{onClick:()=>{l(""),v()},className:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500",children:"Clear"})]}),i&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,n.jsxs)("div",{className:"bg-white p-6 rounded-lg w-96 max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Count Session"}),(0,n.jsxs)("form",{onSubmit:j,children:[(0,n.jsxs)("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Event"}),(0,n.jsxs)("select",{required:!0,value:u.eventId,onChange:e=>p({...u,eventId:e.target.value}),className:"w-full px-3 py-2 border rounded",children:[n.jsx("option",{value:"",children:"Select an event"}),d.map(e=>(0,n.jsxs)("option",{value:e.id,children:[e.name," - ",new Date(e.date).toLocaleDateString()]},e.id))]})]}),(0,n.jsxs)("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Session Name"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",required:!0,value:u.sessionName,onChange:e=>p({...u,sessionName:e.target.value}),className:"flex-1 px-3 py-2 border rounded",placeholder:"e.g., Morning Session"}),n.jsx("button",{type:"button",onClick:N,className:"bg-blue-500 text-white px-3 py-2 rounded text-sm hover:bg-blue-600",children:"Auto"})]})]}),(0,n.jsxs)("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Count Time"}),n.jsx("input",{type:"datetime-local",required:!0,value:u.countTime,onChange:e=>p({...u,countTime:e.target.value}),className:"w-full px-3 py-2 border rounded"})]}),(0,n.jsxs)("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes"}),n.jsx("textarea",{value:u.notes,onChange:e=>p({...u,notes:e.target.value}),className:"w-full px-3 py-2 border rounded h-20",placeholder:"Optional notes about this count session..."})]}),(0,n.jsxs)("div",{className:"flex gap-4",children:[n.jsx("button",{type:"submit",className:"flex-1 bg-purple-600 text-white py-2 rounded hover:bg-purple-700",children:"Create Session"}),n.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 bg-gray-400 text-white py-2 rounded hover:bg-gray-500",children:"Cancel"})]})]})]})}),n.jsx("div",{className:"grid gap-4",children:0===e.length?(0,n.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[n.jsx("p",{className:"text-xl mb-2",children:"No count sessions found"}),n.jsx("p",{children:"Add your first count session to get started"})]}):e.map(e=>(0,n.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border hover:shadow-lg transition-shadow",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.sessionName}),(0,n.jsxs)("div",{className:"flex items-center text-gray-600 mb-2",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.event.name]}),(0,n.jsxs)("div",{className:"flex items-center text-gray-600 mb-2",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),y(new Date().toString())]}),e.event.location&&(0,n.jsxs)("div",{className:"flex items-center text-gray-600 mb-2",children:[(0,n.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.event.location]}),e.notes&&n.jsx("p",{className:"text-gray-700 mt-3 italic",children:e.notes})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 ml-4",children:[n.jsx("span",{className:`px-2 py-1 rounded text-sm ${e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.isActive?"Active":"Inactive"}),n.jsx("button",{className:"bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700",children:"View Report"})]})]}),(0,n.jsxs)("div",{className:"border-t pt-3 mt-4 text-sm text-gray-500",children:[(0,n.jsxs)("p",{children:["Created: ",new Date(e.createdAt).toLocaleDateString()]}),(0,n.jsxs)("p",{children:["Event Date: ",new Date(e.event.startDate).toLocaleDateString()]})]})]},e.id))}),(0,n.jsxs)("div",{className:"mt-8 text-center text-gray-500",children:[(0,n.jsxs)("p",{children:["Total Count Sessions: ",e.length]}),n.jsx("p",{className:"text-sm",children:"Using SDD Count Tracking Library"})]})]})}},4683:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});let n=(0,s(8570).createProxy)(String.raw`/Users/cory/Documents/Cloudy-Work/applications/jw-attendant-scheduler/app/counts/page.tsx#default`)},1506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,metadata:()=>o});var n=s(9510),a=s(5384),r=s.n(a);s(1159),s(7272);let o={title:"JW Attendant Scheduler",description:"Next.js SDD Implementation of JW Attendant Scheduler"};function l({children:e}){return n.jsx("html",{lang:"en",children:(0,n.jsxs)("body",{className:r().className,children:[n.jsx("nav",{className:"bg-blue-600 text-white p-4",children:(0,n.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[n.jsx("h1",{className:"text-xl font-bold",children:"JW Attendant Scheduler"}),(0,n.jsxs)("div",{className:"space-x-4",children:[n.jsx("a",{href:"/",className:"hover:text-blue-200",children:"Home"}),n.jsx("a",{href:"/attendants",className:"hover:text-blue-200",children:"Attendants"}),n.jsx("a",{href:"/events",className:"hover:text-blue-200",children:"Events"}),n.jsx("a",{href:"/counts",className:"hover:text-blue-200",children:"Count Tracking"})]})]})}),n.jsx("main",{className:"container mx-auto p-4",children:e})]})})}},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),n=t.X(0,[276,892],()=>s(8717));module.exports=n})();