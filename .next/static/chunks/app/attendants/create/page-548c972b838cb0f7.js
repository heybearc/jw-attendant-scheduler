(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[946],{1934:function(e,t,a){Promise.resolve().then(a.bind(a,6446))},6446:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var s=a(7437),r=a(2265),n=a(9376),l=a(9294),i=a(7648);function c(){let{user:e}=(0,l.a)(),t=(0,n.useRouter)(),[a,c]=(0,r.useState)(!1),[d,o]=(0,r.useState)(""),[u,m]=(0,r.useState)({firstName:"",lastName:"",email:"",phone:"",servingAs:[],skills:[],preferredDepartments:[],notes:""}),h=async e=>{e.preventDefault(),c(!0),o("");try{let e=await fetch("/api/attendants",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(e.ok)t.push("/attendants");else{let t=await e.json();o(t.error||"Failed to create attendant")}}catch(e){o("An error occurred while creating the attendant")}finally{c(!1)}},x=(e,t,a)=>{m(s=>({...s,[e]:a?[...s[e],t]:s[e].filter(e=>e!==t)}))};return e?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsx)("div",{className:"container mx-auto px-4 max-w-4xl",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Create New Attendant"}),(0,s.jsx)(i.default,{href:"/attendants",className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Back to Attendants"})]}),d&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6",children:d}),(0,s.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),(0,s.jsx)("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:u.firstName,onChange:e=>m(t=>({...t,firstName:e.target.value}))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),(0,s.jsx)("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:u.lastName,onChange:e=>m(t=>({...t,lastName:e.target.value}))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,s.jsx)("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:u.email,onChange:e=>m(t=>({...t,email:e.target.value}))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),(0,s.jsx)("input",{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:u.phone,onChange:e=>m(t=>({...t,phone:e.target.value}))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Serving As"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["Attendant","Microphone Handler","Sound Operator","Platform Assistant","Literature Servant","Accounts Servant","Security","Parking Attendant","Information Desk","First Aid","Cleaning","Stage Manager"].map(e=>(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",className:"mr-2",checked:u.servingAs.includes(e),onChange:t=>x("servingAs",e,t.target.checked)}),(0,s.jsx)("span",{className:"text-sm",children:e})]},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skills & Qualifications"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["Audio/Visual Equipment","Public Speaking","First Aid Certified","Sign Language","Multiple Languages","Technical Support","Event Coordination","Customer Service","Security Training"].map(e=>(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",className:"mr-2",checked:u.skills.includes(e),onChange:t=>x("skills",e,t.target.checked)}),(0,s.jsx)("span",{className:"text-sm",children:e})]},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Departments"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["Platform","Audio/Visual","Literature","Accounts","Security","Parking","Information","First Aid","Cleaning","Stage"].map(e=>(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",className:"mr-2",checked:u.preferredDepartments.includes(e),onChange:t=>x("preferredDepartments",e,t.target.checked)}),(0,s.jsx)("span",{className:"text-sm",children:e})]},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,s.jsx)("textarea",{rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:u.notes,onChange:e=>m(t=>({...t,notes:e.target.value})),placeholder:"Additional notes about the attendant..."})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,s.jsx)(i.default,{href:"/attendants",className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:a?"Creating...":"Create Attendant"})]})]})]})})}):(0,s.jsx)("div",{children:"Please sign in to access this page."})}},9294:function(e,t,a){"use strict";a.d(t,{Providers:function(){return i},a:function(){return l}});var s=a(7437),r=a(2265);let n=(0,r.createContext)(void 0);function l(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function i(e){let{children:t}=e,[a,l]=(0,r.useState)(null),[i,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{d()},[]);let d=async()=>{try{let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let t=await e.json();l(t.user)}}catch(e){console.error("Auth check failed:",e)}finally{c(!1)}},o=async(e,t)=>{try{let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t})});if(a.ok){let e=await a.json();return l(e.user),!0}return!1}catch(e){return console.error("Login failed:",e),!1}},u=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),l(null)}catch(e){console.error("Logout failed:",e)}};return(0,s.jsx)(n.Provider,{value:{user:a,loading:i,login:o,logout:u},children:t})}},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[981,971,117,744],function(){return e(e.s=1934)}),_N_E=e.O()}]);