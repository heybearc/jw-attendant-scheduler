"use strict";(()=>{var e={};e.id=6041,e.ids=[6041],e.modules={3524:e=>{e.exports=require("@prisma/client")},2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8714:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>m,patchFetch:()=>g,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>x,staticGenerationAsyncStorage:()=>h});var r={};s.r(r),s.d(r,{GET:()=>p});var a=s(9303),n=s(8716),o=s(670),i=s(7070),u=s(8574);let d=new(s(3524)).PrismaClient;async function p(){try{let e=await u.e.getCurrentUser();if(!e)return i.NextResponse.json({error:"Unauthorized"},{status:401});let[t,s,r,a]=await Promise.all([d.events.count({where:{isActive:!0}}),d.events.count({where:{isActive:!0,status:"UPCOMING",startDate:{gte:new Date}}}),d.attendants.count({where:{isAvailable:!0}}),d.assignments.count({where:{userId:e.id,status:{in:["ASSIGNED","CONFIRMED"]}}})]);return i.NextResponse.json({totalEvents:t,upcomingEvents:s,totalAttendants:r,myAssignments:a})}catch(e){return console.error("Failed to fetch dashboard stats:",e),i.NextResponse.json({error:"Failed to fetch dashboard stats"},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/dashboard/stats/route",pathname:"/api/dashboard/stats",filename:"route",bundlePath:"app/api/dashboard/stats/route"},resolvedPagePath:"/Users/cory/Documents/Cloudy-Work/applications/jw-attendant-scheduler/app/api/dashboard/stats/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:h,serverHooks:x}=c,m="/api/dashboard/stats/route";function g(){return(0,o.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:h})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[9276,5972,8574],()=>s(8714));module.exports=r})();